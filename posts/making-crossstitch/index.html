<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta content="width=device-width, initial-scale=1.0" name="viewport"><title>Jack Armley</title><link rel="stylesheet" href="/static/styles/styles.css"><script src="/static/libs/modernizr/modernizr.min.js"></script></head><body class="view-post"><header role="banner" aria-label="Site header" class="site-header"><div class="site-header-inner"><span class="site-navtoggle"></span><a href="/" aria-label="Home" class="site-logo">Jack Armley</a><nav role="navigation" aria-label="Site navigation" class="site-navigation"><ul><li><a href="/categories/work/index.html" aria-label="Work">Work</a></li><li><a href="/categories/notes/index.html" aria-label="Notes">Notes</a></li><li><a href="/about.html" aria-label="About">About</a></li></ul></nav></div></header><main role="main" aria-label="Page content" class="page-content"><article class="fullpost"><header style="background-color:#undefined" class="fullpost-header"><div class="fullpost-header-inner"><h1 class="fullpost-title">Making crosstitch</h1></div></header><div class="fullpost-body"><p>In the quest to reduce image requests (something I’m fanatical about given the range of devices and network speeds out there), one tool I’ve added to the set is to use box shadows to generate simple icons. </p>
<p>I’ve seen this technique used in the wild to make simple things like hamburger icons (which seems performant and realistic) and for amazing but impractical things, like a full pixel-art Mona Lisa.</p>
<p>As box shadows (like any css-generated shape drawn by the browser) are resolution agnostic, it’s a useful technique. I define the size of the icon with a simple <code>&lt;span&gt;</code>, then use a pseudo element within (like <code>:before</code>) to create the orign point for the shadows.</p>
<p>It can be super tricky figuring out where each shadow should go to make the icon but hey, I figured SASS could make this easier for me! So with the help of <a href="&#39;http://twitter.com/shadowmint&#39;">@shadowmint</a>, I made a SASS script that generates a box shadow icon via a list. As it uses X’s and O’s to generate the icon, we called it crosstitch.</p>
<h2 id="What_I_needed_to_get_to">What I needed to get to</h2><p><img src="/images/blog/making-crossstitch--fig1.gif" alt="A diagram explaining how icons are made using CSS box shadows"></p>
<h2 id="Step_1:_Provide_input">Step 1: Provide input</h2><p>To define where each shadow should go I started with a list. Shadows are represented with an “x”, and negative space by a “o”. The size of the icon can be defined also, by wrapping each row in another list.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$<span class="rule"><span class="attribute">icon</span>:<span class="value">(</span><br><span class="line">    (x o x)</span><br><span class="line">    (o x o)</span><br><span class="line">    (x o x)</span><br><span class="line">)</span></span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>length($icon)</code> gives me the height of the icon by returning how many sublists <code>$icon</code> contains.</li>
<li><code>length(nth($icon),1)</code> gives me the width of the icon, by returning the length of the first sublist within <code>$icon</code> (this assumes each sublist will be the same length).</li>
</ul>
<h2 id="Step_2:_Define_the_icon’s_size">Step 2: Define the icon’s size</h2><p>Using a mixin, we can set the basic styles for the icon with two simple arguments:</p>
<ul>
<li><code>$size</code>: the size each box shadow should be</li>
<li><code>$icon</code>: the icon to draw</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> stitchicon</span>(<span class="variable">$icon</span>,<span class="variable">$size</span>)&#123;</span></span><br><span class="line">  <span class="attribute">position</span><span class="value">:relative;</span></span><br><span class="line">  <span class="attribute">display</span><span class="value">: block;</span></span><br><span class="line">  <span class="comment">// Define the icon's width and height by multipying an</span></span><br><span class="line">  <span class="comment">// individual shadow size by the length of the $icon list</span></span><br><span class="line">  <span class="attribute">width</span><span class="value">:(<span class="variable">$size</span> * <span class="function">length</span>(<span class="function">nth</span>(<span class="variable">$matrix</span>,<span class="number">1</span>)));</span></span><br><span class="line">  <span class="attribute">height</span><span class="value">:(<span class="variable">$size</span> * <span class="function">length</span>(<span class="variable">$matrix</span>));</span></span><br><span class="line">  <span class="comment">// Define the size of the box shadows to be</span></span><br><span class="line">  <span class="comment">// generated, with a pseudo element</span></span><br><span class="line">  &amp;<span class="pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">content</span><span class="value">:<span class="string">' '</span>;</span></span><br><span class="line">    <span class="attribute">position</span><span class="value">:absolute;</span></span><br><span class="line">    <span class="attribute">top</span><span class="value">:(-<span class="variable">$size</span>);</span></span><br><span class="line">    <span class="attribute">left</span><span class="value">:(-<span class="variable">$size</span>);</span></span><br><span class="line">    <span class="attribute">display</span><span class="value">: block;</span></span><br><span class="line">    <span class="attribute">width</span><span class="value">:<span class="variable">$size</span>;</span></span><br><span class="line">    <span class="attribute">height</span><span class="value">:<span class="variable">$size</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Step_2:_Generate_the_shadows">Step 2: Generate the shadows</h2><p>Mixins can’t generate the values within a css <code>property: value;</code> rule; only functions can do that. So, we need to make a function to grab the noughts and crosses from the lists, and generate a rule from them. Best way? Iterate over the lists with a <code>@for</code> loop.</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$icon</span><span class="value">:(</span><br><span class="line">    (x o x)</span><br><span class="line">    (o x o)</span><br><span class="line">    (x o x)</span><br><span class="line">);</span></span><br><span class="line"></span><br><span class="line"><span class="at_rule">@function<span class="preprocessor"> makestitch</span>(<span class="variable">$icon</span>)&#123;</span></span><br><span class="line">    <span class="variable">$l</span><span class="value">: <span class="function">length</span>(<span class="variable">$icon</span>);</span></span><br><span class="line">    <span class="variable">$i</span><span class="value">: <span class="variable">$l</span>;</span></span><br><span class="line">    <span class="comment">// Iterates over each sub list within $icon</span></span><br><span class="line">    <span class="at_rule">@<span class="keyword">for</span> <span class="variable">$i</span><span class="preprocessor"> from</span><span class="preprocessor"> 1</span><span class="preprocessor"> through</span> <span class="variable">$l</span>&#123;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Rather than going through all the parts of the for loop, why not take a look at the <a href="http://codepen.io/jackarmley/pen/LohqG" target="_blank" rel="external">crosstitch pen!</a> Feel free to make use of it if you need any super-awesome pixel graphics.</p>
</div></article></main><footer role="contentinfo" aria-label="Site footer" class="site-footer"><div class="site-footer-inner"><h2>Elsewhere&hellip;</h2><ul class="followme"><li data-link="twitter" class="followme-link"><a href="http://twitter.com/jackarmley" aria-label="On twitter @jackarmley (opens an external site)"><span aria-hidden="true">@jackarmley</span></a></li><li data-link="codepen" class="followme-link"><a href="http://codepen.io/jackarmley" aria-label="On Codepen as jackarmley (opens an external site)"><span aria-hidden="true">/ jackarmley</span></a></li><li data-link="github" class="followme-link"><a href="http://github.com/jackarmley" aria-label="On Github as jackarmley (opens an external site)"><span aria-hidden="true">/ jackarmley</span></a></li></ul></div></footer><script src="/static/scripts/app.js"></script></body></html>